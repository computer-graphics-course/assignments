###### Практична робота №1
## Розробка програми для конвертації зображень різних форматів

### Мета роботи
1) Розібратися з різними форматами зберігання зображень;
2) Вивчити (або закріпити) принципи побудови програм з плагінами;

### Що треба зробити
Необхідно реалізувати консольну програму, яка конвертує зображення між різними форматами та приймає наступні аргументі командного рядка:

- `--source` - вхідний файл для конвертації (шлях до файлу)
- `--goal-format` - вихідний формат для конвертації (напр. Png або Bmp32)
- `--output` - шлях до результату (за замовчуванням використовується ім'я та шлях оригінального файлу з новим розширенням)

Приклад виклику програми:
```
> Converter.exe --source=example.bmp --goal-format=png
```

Крім того, програма має обробляти ситуацію спроби відкриття некоректного файлу (файлу з іншим розширенням або з некоректним вмістом) і не завершувати роботу аварійно, а виводити повідомленя про помилку. Наприклад: `Error: you are trying to open .tiff file, but only .bmp and . gif files are supported`, або `Error: you trying to open 8bit BMP file, but only BMP32 is supported`

Для заліку роботи потрібно реалізувати щойнайменше два формати файлів (на вибір) - різні формати мають різну складність і тому оцінюються в різну кількість балів. Варіанти форматів:
1. **PPM (portable pixmap format)** - найпростіший текстовий формат для зберігання зображення. Файл містить в собі заголовок, що складається з формату, ширини та довжини зображення в пікселях та максимального значення кожної кольорової компоненти _M_. Після цього у файлі знаходяться трійки значень RGB у діапазоні [0, _M_] для кожного пікселя зображення. Приклад файлу:
```
P3
# Image with width 3 and height 2,
# using 0 or 1 per color (red, green, blue)
3 2 1
1 0 0   0 1 0   0 0 1
1 1 0   1 1 1   0 0 0
```
Формат використовується переважно як допоміжний або проміжний при роботі з іншими типами файлів, детальніше можна почитати у [вікі](https://en.wikipedia.org/wiki/Netpbm#File_formats) або безпосередньо у [специфікації формату](http://netpbm.sourceforge.net/doc/ppm.html)

2. **BMP (bitmap image file)** - простий та дуже розповсюджений формат, має багато варіацій збереження файлів (різна кількість байт на піксель, можливість стискання тощо). Більш детально можна почитати в [описі роботи для першого курсу](https://github.com/ProgramEngineeringKPI/Introduction-To-Programming/blob/master/labs_spring_2020/assignment_4.md), там же можна знайти багато посилань на опис формату. В цьому варіанті треба обрати іншу глибину кольору ніж у роботі для першого курсу (НЕ 24 біти, а, наприклад, 16 або 32)
3. **GIF (Graphics Interchange Format)** - популярний на зарі розвитку інтернету формат, підтримує анімації, має менший  розмір ніж BMP за рахунок використання стискання [Lempel-Ziv](https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch). На сьогодні використовується переважно для анімованих [приколів та мемасів](https://giphy.com/). Детальніше - [хабр](https://habr.com/ru/post/127083/), [вікі](https://en.wikipedia.org/wiki/GIF), [детальна структура](https://www.fileformat.info/format/gif/egff.htm)
4. **PNG (Portable Network Graphics)** - алгоритм, що поступово витіснив GIF у вебі за рахунок більших можливостей у передачі кольорів, прозорості та кращому (у більшості випадків) стисненню змісту. Детальніше можна почитати на [хабрі](https://habr.com/ru/post/130472/), у [вікі](https://en.wikipedia.org/wiki/Portable_Network_Graphics) та на [домашньому сайті формату](http://www.libpng.org/pub/png/)(і таке буває)
6. **JPEG (Joint Photographic Experts Group)** - широко розповсюджений, але і найскладніший (використовує один із видів дискретного перетворення Фур'є) із запропонованих варіант. Специфіка алгоритму з втратами призводить до появи видимих артефактів у місцях різкого перехода кольору, тому найбільше використовується для зображень де такі переходи малопомітні або їх немає - наприклад, цифрові фотографії. Детальніше - [хабр](https://habr.com/ru/post/102521/), [ще хабр](https://habr.com/ru/post/206264/), [стаття](https://www.freecodecamp.org/news/how-jpg-works-a4dbd2316f35/), [ще стаття](https://arjunsreedharan.org/post/146070390717/jpeg-101-how-does-jpeg-work#:~:text=JPEG%20is%20a%20lossy%20compression,we%20do%20brightness%20(luminance).), [вікі](https://en.wikipedia.org/wiki/JPEG)

Крім власне роботи з форматами, коректна програма має бути побудована за принципом плагінів: високорівневий код перетворення файлів не має оперувати конкретними реалізаціями форматів, а тільки абстракціями. Іншими словами, не дозволяється прямого використання `using` або `import` модулів конкретних форматів в програмі-конверторі більше ніж в одному місці (фабриці). 

Приклад можливої структури класів у ООП-мові:

![](./res/scheme_uml_1.png)

В даному випадку програма на високоу рівні оперує інтерфейсами `IImageReader` та `IImageWriter`, не знаючи які саме формати в данний момент підтримуються. Підключення формату-плагіна можливо через рефлексію (наприклад, використання атрибутів у C#/анотацій в Java), або через об'єкт фабрику, який єдиний буде знати про всі поточні формати. В залежності від обраної мови програмування вам доведеться самостійно обрати механізм реалізації підключення плагінів

### Примітки
- В наступних роботах ми будемо використовувати зображення різних інших, більш складних форматів, і тому будемо користуватися готовими бібліотеками. В цій роботі читання\запис файлів різних форматів потрібно реалізувати самостійно (крім алгоритмів стисненния у PNG та GIF).
- Для того щоб здати роботу потрібно зібрати реліз програми під win64 платформу та прикріпити у релізи у вашому гітхаб-репозиторії. Після цього можна писати в дискорд, що робота готова і очікувати перевірки.


### Оцінювання:
Максимум за роботу можна отримати _16 балів_. Мінімальний "набір" балів (9) можна отримати за роботу "гарний код + bmp + ppm". Якщо ваша ціль за підсумками семестру - Е, можете сміливо брати такий варіант. PNG\GIF трохи складніші та дозволяють отримати більше балів, ну those-who-dare варіант з GIF дозволяє отримати бали з запасом.
- Якість написання коду - _3 бали_. Якщо ви здаєте роботу вчасно і отримуєте не максимум з цього пункту, ви можете доробити\порефакторити роботу і підвищити оцінку;
- Алгоритм PPM - _3 бали_;
- Алгоритм BMP - _3 балів_;
- Алгоритм PNG та GIF (з використанням бібліотеки для стиснення) - _4 бали_ . Додатково _+1 бал_ за самостоійну реалізацію
- Алгоритм JPEG - _8 балів_;

